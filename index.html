<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>灵境塔罗 - AI深度心灵指引</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8B6BC9;
            --secondary: #5E4A8C;
            --accent: #C9A7E8;
            --light: #F5F0FF;
            --dark: #2D1B4E;
            --text: #333;
            --text-light: #666;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 50%, #16213e 100%);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            position: relative;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #C9A7E8, #F5F0FF, #C9A7E8);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(201, 167, 232, 0.3);
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #b8b8d0;
            margin-bottom: 20px;
            font-style: italic;
        }
        
        .ai-badge {
            display: inline-block;
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .user-input-section {
            background: rgba(45, 27, 78, 0.7);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(201, 167, 232, 0.2);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--accent);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(201, 167, 232, 0.3);
            background: rgba(26, 26, 46, 0.7);
            color: var(--light);
            font-size: 16px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .spread-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .spread-option {
            background: rgba(26, 26, 46, 0.7);
            border: 1px solid rgba(201, 167, 232, 0.3);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .spread-option:hover {
            background: rgba(201, 167, 232, 0.1);
            transform: translateY(-5px);
        }
        
        .spread-option.active {
            background: rgba(201, 167, 232, 0.2);
            border-color: var(--accent);
        }
        
        .spread-name {
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .spread-desc {
            font-size: 0.9rem;
            color: #b8b8d0;
        }
        
        .btn {
            background: linear-gradient(to bottom, #8B6BC9, #5E4A8C);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: linear-gradient(to bottom, #9B7BD9, #6E5A9C);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 107, 201, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-large {
            padding: 16px 32px;
            font-size: 18px;
        }
        
        .btn-ai {
            background: linear-gradient(to bottom, #4CAF50, #388E3C);
        }
        
        .btn-ai:hover {
            background: linear-gradient(to bottom, #66BB6A, #4CAF50);
        }
        
        .center {
            text-align: center;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .card-display {
            margin: 40px 0;
            min-height: 400px;
        }
        
        .spread-layout {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin: 40px 0;
        }
        
        .spread-position {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .position-label {
            background: rgba(201, 167, 232, 0.2);
            color: var(--accent);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            margin-bottom: 10px;
            text-align: center;
            max-width: 180px;
        }
        
        .tarot-card {
            width: 160px;
            height: 260px;
            background: linear-gradient(145deg, #F5F0FF, #C9A7E8);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            transform-style: preserve-3d;
            transition: transform 0.8s ease;
            color: var(--dark);
            position: relative;
            overflow: hidden;
            border: 2px solid var(--accent);
            cursor: pointer;
        }
        
        .tarot-card::before {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 1px solid rgba(45, 27, 78, 0.3);
            border-radius: 8px;
            pointer-events: none;
        }
        
        .tarot-card.reversed {
            transform: rotate(180deg);
        }
        
        .card-top, .card-bottom {
            font-size: 14px;
            font-weight: bold;
            text-align: left;
            z-index: 2;
        }
        
        .card-bottom {
            transform: rotate(180deg);
        }
        
        .card-center {
            font-size: 36px;
            font-weight: bold;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }
        
        .card-name {
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            margin-top: 5px;
            color: var(--dark);
        }
        
        .card-meaning {
            background: rgba(45, 27, 78, 0.9);
            color: var(--light);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
            text-align: left;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
            position: absolute;
            width: 300px;
            z-index: 10;
            left: 50%;
            transform: translateX(-50%);
            bottom: 100%;
            margin-bottom: 10px;
        }
        
        .tarot-card:hover .card-meaning {
            max-height: 200px;
            padding: 15px;
        }
        
        .card-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        .reading-result {
            background: rgba(45, 27, 78, 0.7);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(201, 167, 232, 0.2);
        }
        
        .ai-analysis {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .ai-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .ai-icon {
            font-size: 24px;
            color: #4CAF50;
        }
        
        .ai-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 20px;
        }
        
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(76, 175, 80, 0.3);
            border-radius: 50%;
            border-top-color: #4CAF50;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .disclaimer {
            background: rgba(201, 167, 232, 0.1);
            border-left: 4px solid var(--accent);
            padding: 15px;
            margin: 20px 0;
            font-size: 0.9rem;
            color: #b8b8d0;
        }
        
        .premium-offer {
            background: rgba(201, 167, 232, 0.1);
            border: 1px solid rgba(201, 167, 232, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }
        
        .premium-badge {
            display: inline-block;
            background: linear-gradient(45deg, #8B6BC9, #C9A7E8);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .payment-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .payment-option {
            background: rgba(26, 26, 46, 0.7);
            border: 1px solid rgba(201, 167, 232, 0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            width: 150px;
        }
        
        .qrcode {
            width: 120px;
            height: 120px;
            background: #f5f5f5;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-size: 12px;
        }
        
        .history-panel {
            background: rgba(45, 27, 78, 0.7);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(201, 167, 232, 0.2);
        }
        
        .history-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .history-item {
            padding: 12px;
            border-bottom: 1px solid rgba(201, 167, 232, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .deck-info {
            margin-top: 15px;
            font-size: 16px;
            color: #b8b8d0;
        }
        
        /* 六芒星牌阵特定样式 */
        .spread-hexagram {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 0 auto;
        }
        
        .hexagram-position {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .pos-1 { bottom: 20px; left: 50%; transform: translateX(-50%); }
        .pos-2 { top: 50%; right: 20px; transform: translateY(-50%); }
        .pos-3 { top: 20px; left: 50%; transform: translateX(-50%); }
        .pos-4 { top: 20px; left: 50%; transform: translateX(-50%); }
        .pos-5 { top: 50%; left: 20px; transform: translateY(-50%); }
        .pos-6 { bottom: 20px; left: 50%; transform: translateX(-50%); }
        .pos-7 { top: 50%; left: 50%; transform: translate(-50%, -50%); }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .spread-options {
                grid-template-columns: 1fr;
            }
            
            .tarot-card {
                width: 140px;
                height: 220px;
            }
            
            .card-center {
                font-size: 30px;
            }
            
            .card-name {
                font-size: 14px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 80%;
            }
            
            .spread-hexagram {
                width: 300px;
                height: 300px;
            }
        }
        
        @media (max-width: 480px) {
            .tarot-card {
                width: 120px;
                height: 190px;
            }
            
            .card-center {
                font-size: 24px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .user-input-section, .reading-result, .history-panel {
                padding: 15px;
            }
            
            .spread-hexagram {
                width: 250px;
                height: 250px;
            }
        }
        
        /* 动画效果 */
        @keyframes drawCard {
            0% { transform: scale(0.8) rotate(-10deg); opacity: 0; }
            70% { transform: scale(1.05) rotate(5deg); }
            100% { transform: scale(1) rotate(0); opacity: 1; }
        }
        
        .drawn-card {
            animation: drawCard 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        
        .hidden {
            display: none;
        }
        
        /* 星星背景 */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- 星星背景 -->
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <header>
            <h1>灵境塔罗 - AI深度心灵指引</h1>
            <div class="subtitle">倾听内心的声音，让AI塔罗之光指引你前行</div>
            <div class="ai-badge">由DeepSeek AI提供深度分析</div>
        </header>
        
        <section class="user-input-section fade-in">
            <div class="form-group">
                <label for="userQuestion">你的议题或问题：</label>
                <textarea id="userQuestion" placeholder="请详细描述你想询问的问题..."></textarea>
            </div>
            
            <div class="form-group">
                <label>选择牌阵：</label>
                <div class="spread-options">
                    <div class="spread-option active" data-spread="single">
                        <div class="spread-name">单张牌牌阵</div>
                        <div class="spread-desc">简单直接的问题解答</div>
                    </div>
                    <div class="spread-option" data-spread="triangle">
                        <div class="spread-name">圣三角牌阵</div>
                        <div class="spread-desc">过去、现在、未来时间线分析</div>
                    </div>
                    <div class="spread-option" data-spread="relationship">
                        <div class="spread-name">一对一关系牌阵</div>
                        <div class="spread-desc">深入分析两人关系的各个方面</div>
                    </div>
                    <div class="spread-option" data-spread="choice">
                        <div class="spread-name">选择牌阵</div>
                        <div class="spread-desc">比较不同选择的过程和结果</div>
                    </div>
                    <div class="spread-option" data-spread="hexagram">
                        <div class="spread-name">六芒星牌阵</div>
                        <div class="spread-desc">全面深入的问题分析</div>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="userEmail">邮箱地址：</label>
                <input type="email" id="userEmail" placeholder="用于接收分析报告">
            </div>
            
            <div class="form-group">
                <label for="userPhone">联系电话：</label>
                <input type="tel" id="userPhone" placeholder="用于深度分析沟通">
            </div>
            
            <div class="form-group">
                <label for="userName">你的姓名：</label>
                <input type="text" id="userName" placeholder="如何称呼你">
            </div>
            
            <div class="action-buttons">
                <button id="startReading" class="btn btn-large">
                    <i class="fas fa-star"></i> 开始占卜
                </button>
            </div>
        </section>
        
        <section id="readingSection" class="user-input-section hidden">
            <div class="center">
                <h2>专注你的问题，然后抽取牌阵</h2>
                <p>深呼吸，在心中默念你的问题，然后点击下方按钮抽牌</p>
                
                <div class="action-buttons">
                    <button id="shuffleDeck" class="btn">
                        <i class="fas fa-random"></i> 洗牌
                    </button>
                    <button id="drawCards" class="btn btn-large">
                        <i class="fas fa-hand-sparkles"></i> 抽取牌阵
                    </button>
                </div>
                
                <div class="deck-info">
                    剩余牌数: <span id="remainingCards">78</span> 张
                </div>
            </div>
            
            <div class="card-display">
                <div id="cardArea" class="spread-layout">
                    <!-- 牌阵将在这里动态生成 -->
                </div>
            </div>
            
            <div id="readingResult" class="reading-result hidden">
                <h2 class="center">塔罗指引</h2>
                <div id="interpretation"></div>                                <div class="action-buttons">                    <button id="aiAnalysis" class="btn btn-large btn-ai">                        <i class="fas fa-robot"></i> AI深度分析                    </button>                    <button id="newReading" class="btn">                        <i class="fas fa-redo"></i> 新的占卜                    </button>                </div>                                <div class="premium-offer">                    <div class="premium-badge">人工深度分析</div>                    <h3>寻求更深入的指引？</h3>                    <p>我们的专业塔罗师将为你提供个性化深度分析，包含详细牌阵解读、能量分析和心灵疗愈建议。</p>                                        <div class="payment-options">                        <div class="payment-option">                            <div class="qrcode">微信支付二维码</div>                            <p>微信支付</p>                        </div>                        <div class="payment-option">                            <div class="qrcode">支付宝二维码</div>                            <p>支付宝</p>                        </div>                    </div>                                        <p class="small-text">一经付费，不予退款</p>                </div>            </div>        </section>                <section class="history-panel">            <div class="history-title">                <i class="fas fa-history"></i> 占卜历史            </div>            <div id="historyList">                <!-- 历史记录将在这里动态生成 -->            </div>        </section>    </div>
    <script>        // 生成星空背景        function createStars() {            const starsContainer = document.getElementById('stars');            const starCount = 150;                        for (let i = 0; i < starCount; i++) {                const star = document.createElement('div');                star.classList.add('star');                                const x = Math.random() * 100;                const y = Math.random() * 100;                const size = Math.random() * 3;                const delay = Math.random() * 5;                                star.style.left = `${x}%`;                star.style.top = `${y}%`;                star.style.width = `${size}px`;                star.style.height = `${size}px`;                star.style.animationDelay = `${delay}s`;                                starsContainer.appendChild(star);            }        }                // 牌阵定义        const spreads = {            single: {                name: "单张牌牌阵",                positions: [                    { id: 1, name: "问题核心", description: "当前情况或问题的核心" }                ],                layout: "single"            },            triangle: {                name: "圣三角牌阵",                positions: [                    { id: 1, name: "过去", description: "代表过去的情况或影响" },                    { id: 2, name: "现在", description: "代表现在的状况或核心问题" },                    { id: 3, name: "未来", description: "代表未来的发展趋势或结果" }                ],                layout: "triangle"            },            relationship: {                name: "一对一关系牌阵",                positions: [                    { id: 1, name: "我如何看待对方", description: "你对对方的看法和感受" },                    { id: 2, name: "对方如何看待我", description: "对方对你的看法和感受" },                    { id: 3, name: "我和对方现在互动状态", description: "当前双方的互动模式" },                    { id: 4, name: "我和对方关系的发展", description: "关系发展的潜力和方向" },                    { id: 5, name: "这段关系的建议", description: "对这段关系的建议和指引" }                ],                layout: "relationship"            },            choice: {                name: "选择牌阵",                positions: [                    { id: 1, name: "求占者现在能量", description: "你当前的状况和心态" },                    { id: 2, name: "选择A的现状", description: "选择A的当前状况" },                    { id: 3, name: "选择A的未来发展", description: "选择A可能带来的未来发展" },                    { id: 4, name: "选择B的现状", description: "选择B的当前状况" },                    { id: 5, name: "选择B的未来发展", description: "选择B可能带来的未来发展" }                ],                layout: "choice"            },            hexagram: {                name: "六芒星牌阵",                positions: [                    { id: 1, name: "代表过去", description: "过去的情况和影响" },                    { id: 2, name: "代表现在", description: "现在的状况和问题" },                    { id: 3, name: "代表未来", description: "未来的发展趋势" },                    { id: 4, name: "过去事发原因", description: "过去事件发生的原因" },                    { id: 5, name: "现在当下的环境影响", description: "当前环境对你的影响" },                    { id: 6, name: "未来可能的应对策略", description: "未来可以采取的应对方法" },                    { id: 7, name: "求占者应该采取的态度或做法", description: "你应该采取的态度或做法" }                ],                layout: "hexagram"            }        };                // 塔罗牌数据        const majorArcana = [            { number: 0, name: "愚者", symbol: "🃏", meaning: "新的开始，天真，冒险" },            { number: 1, name: "魔术师", symbol: "🧙", meaning: "创造力，技能，意志力" },            { number: 2, name: "女祭司", symbol: "🌙", meaning: "直觉，神秘，潜意识" },            { number: 3, name: "女皇", symbol: "👑", meaning: "丰饶，养育，感性" },            { number: 4, name: "皇帝", symbol: "🏛️", meaning: "权威，结构，稳定" },            { number: 5, name: "教皇", symbol: "⛪", meaning: "信仰，传统，道德" },            { number: 6, name: "恋人", symbol: "💑", meaning: "爱情，选择，价值观" },            { number: 7, name: "战车", symbol: "⚔️", meaning: "意志，胜利，控制" },            { number: 8, name: "力量", symbol: "🦁", meaning: "勇气，耐心，控制" },            { number: 9, name: "隐士", symbol: "🧭", meaning: "内省，孤独，指引" },            { number: 10, name: "命运之轮", symbol: "🔄", meaning: "命运，转折点，循环" },            { number: 11, name: "正义", symbol: "⚖️", meaning: "公正，真理，平衡" },            { number: 12, name: "倒吊人", symbol: "🙃", meaning: "牺牲，新视角，等待" },            { number: 13, name: "死神", symbol: "💀", meaning: "结束，转变，新生" },            { number: 14, name: "节制", symbol: "🥃", meaning: "平衡，调和，适度" },            { number: 15, name: "恶魔", symbol: "😈", meaning: "束缚，欲望，物质" },            { number: 16, name: "高塔", symbol: "⚡", meaning: "剧变，启示，崩溃" },            { number: 17, name: "星星", symbol: "⭐", meaning: "希望，灵感，宁静" },            { number: 18, name: "月亮", symbol: "🌕", meaning: "幻觉，恐惧，潜意识" },            { number: 19, name: "太阳", symbol: "☀️", meaning: "成功，活力，快乐" },            { number: 20, name: "审判", symbol: "📯", meaning: "重生，内在召唤，反思" },            { number: 21, name: "世界", symbol: "🌍", meaning: "完成，成就，旅行" }        ];                // 简化的小阿卡纳数据        const minorArcana = [            { number: 1, suit: "权杖", name: "权杖王牌", symbol: "🜁", meaning: "新的开始，创造力，灵感" },            { number: 2, suit: "权杖", name: "权杖二", symbol: "🜂", meaning: "规划，决策，未来" },            { number: 3, suit: "权杖", name: "权杖三", symbol: "🜃", meaning: "远见，合作，扩张" },            { number: 1, suit: "圣杯", name: "圣杯王牌", symbol: "🜏", meaning: "新的情感，直觉，爱" },            { number: 2, suit: "圣杯", name: "圣杯二", symbol: "🜐", meaning: "合作，和谐，关系" },            { number: 3, suit: "圣杯", name: "圣杯三", symbol: "🜑", meaning: "庆祝，友谊，社区" },            { number: 1, suit: "宝剑", name: "宝剑王牌", symbol: "🜝", meaning: "突破，清晰，新想法" },            { number: 2, suit: "宝剑", name: "宝剑二", symbol: "🜞", meaning: "僵局，艰难选择，平衡" },            { number: 3, suit: "宝剑", name: "宝剑三", symbol: "🜟", meaning: "心痛，悲伤，痛苦" },            { number: 1, suit: "星币", name: "星币王牌", symbol: "🜫", meaning: "繁荣，安全，新机会" },            { number: 2, suit: "星币", name: "星币二", symbol: "🜬", meaning: "平衡，适应，资源管理" },            { number: 3, suit: "星币", name: "星币三", symbol: "🜭", meaning: "团队合作，学习，技能" }        ];                let deck = [];        let drawnCards = [];        let history = JSON.parse(localStorage.getItem('tarotHistory')) || [];        let currentSpread = 'single';                // 初始化牌组        function initializeDeck() {            deck = [];                        // 添加大阿卡纳            for (const card of majorArcana) {                deck.push({                    ...card,                    arcana: "major",                    fullName: card.name                });            }                        // 添加小阿卡纳            for (const card of minorArcana) {                deck.push({                    ...card,                    arcana: "minor",                    fullName: `${card.name} (${card.suit})`                });            }                        updateRemainingCards();        }                // 洗牌算法        function shuffleDeck() {            for (let i = deck.length - 1; i > 0; i--) {                const j = Math.floor(Math.random() * (i + 1));                [deck[i], deck[j]] = [deck[j], deck[i]];            }        }                // 抽取牌阵        function drawSpread() {            const spread = spreads[currentSpread];            const positions = spread.positions;                        if (deck.length < positions.length) {                alert(`牌组中剩余牌数不足！需要${positions.length}张牌，但只剩${deck.length}张。`);                return;            }                        // 清空当前显示的牌            drawnCards = [];                        // 为每个位置抽取一张牌            for (const position of positions) {                // 从牌组中随机抽取一张牌                const randomIndex = Math.floor(Math.random() * deck.length);                const card = deck.splice(randomIndex, 1)[0];                                // 随机决定正逆位                const isReversed = Math.random() < 0.5;                                const drawnCard = {                    ...card,                    reversed: isReversed,                    position: isReversed ? "逆位" : "正位",                    spreadPosition: position                };                                drawnCards.push(drawnCard);            }                        // 添加到历史记录            const historyItem = {                spread: spread.name,                question: document.getElementById('userQuestion').value,                cards: drawnCards.map(card => ({                    name: card.fullName,                    position: card.position                })),                timestamp: new Date().toLocaleString()            };                        history.unshift(historyItem);            // 只保留最近10条记录            if (history.length > 10) {                history = history.slice(0, 10);            }                        // 保存到本地存储            localStorage.setItem('tarotHistory', JSON.stringify(history));                        updateDisplay();            updateHistory();            updateRemainingCards();                        // 显示解读结果            setTimeout(() => {                document.getElementById('readingResult').classList.remove('hidden');                generateInterpretation();            }, 1000);        }                // 更新卡片显示        function updateDisplay() {            const cardArea = document.getElementById('cardArea');            cardArea.innerHTML = '';                        const spread = spreads[currentSpread];                        if (spread.layout === 'hexagram') {                cardArea.classList.add('spread-hexagram');                cardArea.classList.remove('spread-layout');                                for (let i = 0; i < drawnCards.length; i++) {                    const card = drawnCards[i];                    const positionContainer = document.createElement('div');                    positionContainer.className = `hexagram-position pos-${i+1}`;                                        const positionLabel = document.createElement('div');                    positionLabel.className = 'position-label';                    positionLabel.textContent = `${card.spreadPosition.name}`;                    positionContainer.appendChild(positionLabel);                                        const cardContainer = document.createElement('div');                    cardContainer.className = 'card-container';                                        const cardElement = document.createElement('div');                    cardElement.className = `tarot-card drawn-card ${card.reversed ? 'reversed' : ''}`;                                        // 根据正逆位调整显示                    if (card.reversed) {                        cardElement.innerHTML = `                            <div class="card-top">${card.symbol}<br>${card.number !== undefined ? card.number : ''}</div>                            <div class="card-center">${card.symbol}</div>                            <div class="card-bottom">${card.symbol}<br>${card.number !== undefined ? card.number : ''}</div>                            <div class="card-meaning">${card.meaning}</div>                        `;                    } else {                        cardElement.innerHTML = `                            <div class="card-top">${card.number !== undefined ? card.number : ''}<br>${card.symbol}</div>                            <div class="card-center">${card.symbol}</div>                            <div class="card-bottom">${card.number !== undefined ? card.number : ''}<br>${card.symbol}</div>                            <div class="card-meaning">${card.meaning}</div>                        `;                    }                                        const cardName = document.createElement('div');                    cardName.className = 'card-name';                    cardName.textContent = `${card.fullName} ${card.reversed ? '(逆位)' : '(正位)'}`;                                        cardContainer.appendChild(cardElement);                    cardContainer.appendChild(cardName);                    positionContainer.appendChild(cardContainer);                    cardArea.appendChild(positionContainer);                }            } else {                cardArea.classList.remove('spread-hexagram');                cardArea.classList.add('spread-layout');                                for (const card of drawnCards) {                    const positionContainer = document.createElement('div');                    positionContainer.className = 'spread-position';                                        const positionLabel = document.createElement('div');                    positionLabel.className = 'position-label';                    positionLabel.textContent = `${card.spreadPosition.name}: ${card.spreadPosition.description}`;                    positionContainer.appendChild(positionLabel);                                        const cardContainer = document.createElement('div');                    cardContainer.className = 'card-container';                                        const cardElement = document.createElement('div');                    cardElement.className = `tarot-card drawn-card ${card.reversed ? 'reversed' : ''}`;                                        // 根据正逆位调整显示                    if (card.reversed) {                        cardElement.innerHTML = `                            <div class="card-top">${card.symbol}<br>${card.number !== undefined ? card.number : ''}</div>                            <div class="card-center">${card.symbol}</div>                            <div class="card-bottom">${card.symbol}<br>${card.number !== undefined ? card.number : ''}</div>                            <div class="card-meaning">${card.meaning}</div>                        `;                    } else {                        cardElement.innerHTML = `                            <div class="card-top">${card.number !== undefined ? card.number : ''}<br>${card.symbol}</div>                            <div class="card-center">${card.symbol}</div>                            <div class="card-bottom">${card.number !== undefined ? card.number : ''}<br>${card.symbol}</div>                            <div class="card-meaning">${card.meaning}</div>                        `;                    }                                        const cardName = document.createElement('div');                    cardName.className = 'card-name';                    cardName.textContent = `${card.fullName} ${card.reversed ? '(逆位)' : '(正位)'}`;                                        cardContainer.appendChild(cardElement);                    cardContainer.appendChild(cardName);                    positionContainer.appendChild(cardContainer);                    cardArea.appendChild(positionContainer);                }            }        }                // 生成解读        function generateInterpretation() {            const interpretationEl = document.getElementById('interpretation');            const question = document.getElementById('userQuestion').value;            const spreadName = spreads[currentSpread].name;                        let interpretation = `<h3>关于"${question}"的塔罗指引</h3>`;            interpretation += `<p>你使用了<strong>${spreadName}</strong>来探索你的问题，以下是塔罗牌给予的启示：</p>`;                        interpretation += `<div class="card-interpretations">`;            for (const card of drawnCards) {                interpretation += `                    <div class="card-interpretation">                        <h4>${card.spreadPosition.name} - ${card.fullName} ${card.reversed ? '(逆位)' : '(正位)'}</h4>                        <p>${generateCardInterpretation(card)}</p>                    </div>                `;            }            interpretation += `</div>`;                        interpretation += `<div class="overall-interpretation">                <h4>整体解读</h4>                <p>${generateOverallInterpretation()}</p>            </div>`;                        // 添加免责声明            interpretation += `<div class="disclaimer">                <p><strong>免责声明：</strong>本次基础分析由AI生成，内容仅供参考，请仔细甄别。塔罗牌是一种探索内心和可能性的工具，不应作为决策的唯一依据。</p>            </div>`;                        interpretationEl.innerHTML = interpretation;        }                // 生成单张牌解读        function generateCardInterpretation(card) {            const baseMeaning = card.meaning;            const position = card.spreadPosition.name;                        let interpretation = `在${position}的位置上，${card.fullName}牌`;                        if (card.reversed) {                interpretation += `以逆位出现，这可能意味着在相关领域存在一些阻碍或内在的挑战，需要你特别留意。`;            } else {                interpretation += `以正位出现，这通常是一个积极的信号，表明能量在这个位置顺畅流动。`;            }                        interpretation += `这张牌提示：${baseMeaning}。`;                        return interpretation;        }                // 生成整体解读        function generateOverallInterpretation() {            const positiveCards = drawnCards.filter(card => !card.reversed).length;            const totalCards = drawnCards.length;            const positiveRatio = positiveCards / totalCards;                        let overall = "从整体牌阵来看，";                        if (positiveRatio >= 0.7) {                overall += "大部分牌以正位出现，显示当前能量流动较为顺畅，情况可能对你有利。";            } else if (positiveRatio >= 0.4) {                overall += "正逆位牌分布较为均衡，显示情况复杂，既有积极因素也有需要留意的挑战。";            } else {                overall += "较多逆位牌出现，提示可能面临一些阻碍或内在课题需要处理。";            }                        overall += "请结合各个位置的具体解读，深入思考塔罗给予的启示。记住，塔罗牌是帮助你连接内在智慧的媒介，最终的答案和选择权始终在你手中。";                        return overall;        }                // AI深度分析        function generateAIAnalysis() {            const question = document.getElementById('userQuestion').value;            const spreadName = spreads[currentSpread].name;            const userName = document.getElementById('userName').value || "亲爱的朋友";                        // 显示加载状态            const interpretationEl = document.getElementById('interpretation');            interpretationEl.innerHTML = `                <div class="ai-analysis">                    <div class="ai-header">                        <i class="fas fa-robot ai-icon"></i>                        <h3>DeepSeek AI深度分析</h3>                    </div>                    <div class="ai-loading">                        <div class="spinner"></div>                        <p>AI正在深度分析你的牌阵，请稍候...</p>                    </div>                </div>            `;                        // 模拟AI分析过程            setTimeout(() => {                // 构建AI分析结果                let aiAnalysis = `                    <div class="ai-analysis">                        <div class="ai-header">                            <i class="fas fa-robot ai-icon"></i>                            <h3>DeepSeek AI深度分析</h3>                        </div>                        <p>${userName}，基于你提出的"${question}"问题，并使用${spreadName}进行探索，我为你提供以下深度分析：</p>                `;                                // 添加每张牌的深度分析                aiAnalysis += `<div class="card-ai-interpretations">`;                for (const card of drawnCards) {                    aiAnalysis += `                        <div class="card-ai-interpretation">                            <h4>${card.spreadPosition.name} - ${card.fullName} ${card.reversed ? '(逆位)' : '(正位)'}</h4>                            <p>${generateAICardInterpretation(card)}</p>                        </div>                    `;                }                aiAnalysis += `</div>`;                                // 添加整体深度分析                aiAnalysis += `                    <div class="overall-ai-interpretation">                        <h4>整体能量分析与建议</h4>                        <p>${generateAIOverallInterpretation()}</p>                    </div>                `;                                // 添加AI免责声明                aiAnalysis += `                    <div class="disclaimer">                        <p><strong>AI分析说明：</strong>本深度分析由DeepSeek AI生成，结合传统塔罗智慧和现代心理学视角。内容仅供参考，不应作为决策的唯一依据。真正的答案往往在你内心深处。</p>                    </div>                `;                                aiAnalysis += `</div>`;                                interpretationEl.innerHTML = aiAnalysis;            }, 3000); // 模拟3秒分析时间        }                // 生成AI单张牌解读        function generateAICardInterpretation(card) {            const position = card.spreadPosition.name;            let interpretation = "";                        // 基于牌和位置生成更深入的解读            switch(card.name) {                case "愚者":                    interpretation = card.reversed ?                         `在${position}的位置上，愚者逆位提醒你可能过于冲动或缺乏计划。这或许是时候放慢脚步，仔细考虑你的选择，避免因一时兴起而陷入困境。` :                        `在${position}的位置上，愚者正位鼓励你拥抱新的可能性。保持开放的心态，信任生命会为你展开合适的道路，即使前路未知也值得探索。`;                    break;                case "女皇":                    interpretation = card.reversed ?                        `在${position}的位置上，女皇逆位可能暗示创造力受阻或滋养不足。关注自我照顾，重新连接你的内在资源，找回丰盛的感觉。` :                        `在${position}的位置上，女皇正位象征着丰饶与滋养。你的努力正在开花结果，记得同时照顾他人和自己的需求，保持平衡。`;                    break;                case "死神":                    interpretation = card.reversed ?                        `在${position}的位置上，死神逆位提示你可能在抗拒必要的改变。放手旧模式虽然困难，但能为新生腾出空间。` :                        `在${position}的位置上，死神正位代表深刻的转变与新生。结束是开始的前提，信任这个变化过程会引领你走向更真实的自我。`;                    break;                default:                    interpretation = card.reversed ?                        `在${position}的位置上，${card.fullName}逆位表明相关能量可能被阻塞或内在化。这邀请你深入探索这个领域，找到平衡的表达方式。` :                        `在${position}的位置上，${card.fullName}正位显示这个领域的能量正在顺畅流动。充分利用这种支持性能量，它会为你的旅程提供助力。`;            }                        return interpretation;        }                // 生成AI整体解读        function generateAIOverallInterpretation() {            const positiveCards = drawnCards.filter(card => !card.reversed).length;            const totalCards = drawnCards.length;            const positiveRatio = positiveCards / totalCards;                        let overall = "从能量层面分析，";                        if (positiveRatio >= 0.7) {                overall += "牌阵显示高度协调的能量流动，表明当前时机对你有利。这种配置通常出现在个人成长和外部支持同步的时刻。建议你信任这个过程，同时保持觉察，因为顺利期也是为未来挑战储备资源的好时机。";            } else if (positiveRatio >= 0.4) {                overall += "牌阵呈现平衡的能量分布，反映生活中既有支持也有挑战的真实状态。这种配置邀请你培养灵活性，在稳定与变化之间找到自己的节奏。记住，平衡不是静态的，而是动态调整的过程。";            } else {                overall += "牌阵显示较多内在或外在的阻力，这可能是一个深度反思和内化的阶段。逆位牌不是惩罚，而是邀请你关注那些需要整合的阴影部分。这个时期特别适合自我探索和内在工作。";            }                        overall += "从心理学角度看，塔罗牌反映了你潜意识的智慧。每张牌都在讲述你内在故事的一部分。建议你不仅关注牌面含义，也留意自己对每张牌的情绪反应——这些反应往往比牌义本身更能揭示深层真相。";                        return overall;        }                // 更新历史记录        function updateHistory() {            const historyList = document.getElementById('historyList');            historyList.innerHTML = '';                        for (const item of history) {                const historyItem = document.createElement('div');                historyItem.className = 'history-item';                historyItem.innerHTML = `                    <span>${item.timestamp} - ${item.spread}</span>                    <span>${item.question.substring(0, 30)}${item.question.length > 30 ? '...' : ''}</span>                `;                historyList.appendChild(historyItem);            }        }                // 更新剩余牌数        function updateRemainingCards() {            document.getElementById('remainingCards').textContent = deck.length;        }                // 初始化事件监听        function initEventListeners() {            // 牌阵选择            document.querySelectorAll('.spread-option').forEach(option => {                option.addEventListener('click', function() {                    document.querySelectorAll('.spread-option').forEach(opt => {                        opt.classList.remove('active');                    });                    this.classList.add('active');                    currentSpread = this.getAttribute('data-spread');                });            });                        // 开始占卜按钮            document.getElementById('startReading').addEventListener('click', function() {                const question = document.getElementById('userQuestion').value;                const email = document.getElementById('userEmail').value;                                if (!question) {                    alert('请输入你的问题或议题');                    return;                }                                if (!email) {                    alert('请输入邮箱地址以便接收分析报告');                    return;                }                                document.querySelector('.user-input-section').classList.add('hidden');                document.getElementById('readingSection').classList.remove('hidden');                                initializeDeck();                shuffleDeck();            });                        // 洗牌按钮            document.getElementById('shuffleDeck').addEventListener('click', function() {                shuffleDeck();                alert('牌已重新洗过，请专注你的问题然后抽取牌阵');            });                        // 抽牌按钮            document.getElementById('drawCards').addEventListener('click', drawSpread);                        // AI分析按钮            document.getElementById('aiAnalysis').addEventListener('click', generateAIAnalysis);                        // 新的占卜按钮            document.getElementById('newReading').addEventListener('click', function() {                document.getElementById('readingSection').classList.add('hidden');                document.querySelector('.user-input-section').classList.remove('hidden');                document.getElementById('readingResult').classList.add('hidden');                                // 清空表单                document.getElementById('userQuestion').value = '';            });        }                // 初始化        function init() {            createStars();            initEventListeners();            updateHistory();        }                // 当页面加载完成后初始化        document.addEventListener('DOMContentLoaded', init);    </script></body></html>